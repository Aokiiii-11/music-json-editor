## 目标
- 主分支 main 保持稳定、可回滚、可持续集成与持续发布
- 建立规范的提交流程（PR/Review/分支保护）与自动化测试/构建
- 提供发布与部署方案（可选：Vercel 或 GitHub Pages）

## 分支与回滚策略
- 建立旧主分支的长期备份：在远端保留 `backup-main-20251203`；后续备份命名 `backup-main-YYYYMMDD`
- 回滚流程文档：
  - 从备份分支创建临时分支并强制推送到 main
  - 确认 CI 通过后再打开保护（避免坏版本卡住）
- 建议启用 main 分支保护：禁止直接 push、需通过 PR 合并、必需 CI 通过

## CI（构建与测试）
- 新增 `/.github/workflows/ci.yml`：
  - 触发：`push` 与 `pull_request`
  - 任务：
    - Node 版本矩阵（e.g. 18/20）
    - 安装依赖（带缓存）
    - 运行 `npm test`（Vitest）
    - 运行 `npm run build`（Vite 构建）
    - 可选：`npm run typecheck`（`tsc --noEmit`）
- 失败则阻止合入；通过后允许合入

## 代码规范与质量
- 在 `package.json` 添加：
  - `scripts`: `lint`、`format`、`typecheck`
- 引入 ESLint 与 Prettier：
  - `.eslintrc`、`.prettierrc` 与忽略文件
  - 规则以 React + TypeScript + Vite 为基础，尽量与现有风格保持一致
- 在 CI 中增加 `npm run lint` 作为可选检查

## 发布与版本管理
- 使用 npm 语义化版本：`npm version patch|minor|major` 触发 tag
- 新增 `/.github/workflows/release.yml`：
  - 触发：推送 tag 时
  - 任务：打包工件并创建 GitHub Release（附构建产物或链接）
- 变更日志：
  - 采用 Conventional Commits 或 `changesets` 自动生成 `CHANGELOG.md`

## 部署方案（二选一或并行）
- Vercel：
  - 使用现有 `vercel.json`（已存在）
  - 在 Vercel 控制台连接仓库与主分支；设置环境变量（如 API Key）
- GitHub Pages：
  - 新增 `/.github/workflows/pages.yml` 构建静态站点并发布到 `gh-pages` 分支
  - 启用 Pages 从 `gh-pages` 发布

## 秘钥与环境变量
- 严禁在仓库提交密钥
- 在 GitHub 仓库的 Secrets 配置：
  - `GEMINI_API_KEY`（若使用自动翻译）
- 在 CI/部署中通过环境变量注入；本地用 `.env`（已在 `.gitignore`）

## PR 与模板
- 新增 `.github/PULL_REQUEST_TEMPLATE.md`：包含变更摘要、测试说明、影响面
- 新增 Issue 模板（Bug/Feature）
- 在 README 中加入贡献流程指南（fork/branch/PR）

## 文档与可用性
- 新增 `README.md`：
  - 项目简介、特性（可视化编辑、译文诊断、分段编辑）
  - 快速开始：`npm install`、`npm run dev`、`npm test`
  - 翻译面板说明与双语格式约定（`英文 | 中文`）
  - 导出与导入、自动翻译的使用方法
- 新增 `docs/verification.md`：如何在本地与 CI 验证构建/测试

## 目录与示例
- 示例数据放在 `samples/`（如 `samples/26822913.json`）
- 清理不必要的构建产物；确保 `.gitignore` 覆盖 `node_modules/`、`dist/`、`.env`

## 渐进式改进（后续）
- 为 JsonEditor 添加端到端测试（Playwright 或 Testing Library）
- 引入诊断面板更细粒度的提示（缺失项的导航跳转）
- 添加错误遥测（仅在本地/开发环境启用）

## 执行顺序
1. 启用 main 分支保护并记录回滚策略
2. 提交 CI 与规范配置（workflows、eslint、prettier、scripts）
3. 添加 README/文档与模板
4. 启用部署（Vercel 或 Pages）
5. 配置 Secrets 与环境变量
6. 验证：提一个 PR，确保 CI 通过、预览可访问

请确认以上方案；确认后我将分步骤提交配置与文档，并在 PR 流程内完成验证。